<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>GoStarterAI Bubble Pop</title>
<style>
  html,body {
    margin:0; padding:0;
    height:100%; overflow:hidden;
    background:radial-gradient(circle at 50% 80%, #0d1b2a, #000);
    font-family:'Poppins',sans-serif;
    color:#fff; user-select:none;
  }
  canvas {
    width:100%;
    height:100%;
    display:block;
    touch-action:none;
  }
  #score {
    position:absolute;
    top:15px; left:50%;
    transform:translateX(-50%);
    background:rgba(255,255,255,0.1);
    padding:8px 18px;
    border-radius:999px;
    font-size:14px;
    backdrop-filter:blur(4px);
  }
</style>
</head>
<body>
<canvas id="game"></canvas>
<div id="score">Score: 0</div>
<script>
const canvas=document.getElementById("game");
const ctx=canvas.getContext("2d");
const scoreEl=document.getElementById("score");
let W,H,dpr=window.devicePixelRatio||1;
function resize(){
  W=window.innerWidth;
  H=window.innerHeight;
  canvas.width=W*dpr;
  canvas.height=H*dpr;
  ctx.setTransform(dpr,0,0,dpr,0,0);
}
resize();
window.addEventListener("resize",resize);

let bubbles=[],score=0,lastSpawn=0;

function rand(min,max){return Math.random()*(max-min)+min;}
function spawnBubble(){
  const radius=rand(15,45);
  bubbles.push({
    x:rand(radius,W-radius),
    y:H+radius,
    r:radius,
    speed:rand(30,70),
    hue:rand(160,300),
    popped:false,
    pulse:Math.random()*Math.PI*2
  });
}

function drawRipple(x,y,r,color){
  const ripple={x,y,r,alpha:1,color};
  const fade=()=>{
    ripple.alpha-=0.05;
    if(ripple.alpha<=0)return;
    ctx.beginPath();
    ctx.arc(ripple.x,ripple.y,ripple.r*(1.1-ripple.alpha*0.1),0,Math.PI*2);
    ctx.strokeStyle=`hsla(${ripple.color},100%,60%,${ripple.alpha})`;
    ctx.lineWidth=3;
    ctx.stroke();
    requestAnimationFrame(fade);
  };
  fade();
}

function popSound(){
  try{
    const ctxA=new (window.AudioContext||window.webkitAudioContext)();
    const o=ctxA.createOscillator();
    const g=ctxA.createGain();
    o.connect(g);g.connect(ctxA.destination);
    o.frequency.value=rand(200,600);
    o.type="sine";
    g.gain.setValueAtTime(0.1,ctxA.currentTime);
    o.start();
    o.stop(ctxA.currentTime+0.15);
  }catch(e){}
}

canvas.addEventListener("pointerdown",e=>{
  const rect=canvas.getBoundingClientRect();
  const x=(e.clientX-rect.left);
  const y=(e.clientY-rect.top);
  for(let i=bubbles.length-1;i>=0;i--){
    const b=bubbles[i];
    const dx=b.x-x,dy=b.y-y;
    if(Math.hypot(dx,dy)<b.r){
      bubbles.splice(i,1);
      drawRipple(x,y,b.r,b.hue);
      score++;
      scoreEl.textContent="Score: "+score;
      popSound();
      break;
    }
  }
});

function update(dt){
  lastSpawn+=dt;
  if(lastSpawn>0.5){
    spawnBubble();
    lastSpawn=0;
  }
  for(const b of bubbles){
    b.y-=b.speed*dt;
    b.pulse+=dt*3;
  }
  bubbles=bubbles.filter(b=>b.y+b.r>0);
}

function draw(){
  ctx.clearRect(0,0,W,H);
  for(const b of bubbles){
    const glow=5+Math.sin(b.pulse)*2;
    const grad=ctx.createRadialGradient(b.x,b.y,b.r*0.2,b.x,b.y,b.r);
    grad.addColorStop(0,`hsla(${b.hue},100%,80%,0.9)`);
    grad.addColorStop(1,`hsla(${b.hue},100%,60%,0.05)`);
    ctx.fillStyle=grad;
    ctx.shadowColor=`hsla(${b.hue},100%,70%,0.4)`;
    ctx.shadowBlur=glow;
    ctx.beginPath();
    ctx.arc(b.x,b.y,b.r,0,Math.PI*2);
    ctx.fill();
  }
}

let lastTime=0;
function loop(t){
  const dt=Math.min(0.05,(t-lastTime)/1000);
  lastTime=t;
  update(dt);
  draw();
  requestAnimationFrame(loop);
}
requestAnimationFrame(loop);
</script>
</body>
</html>